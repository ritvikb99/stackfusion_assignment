(this.webpackJsonpstackfusion_assignment=this.webpackJsonpstackfusion_assignment||[]).push([[0],{20:function(e,t,s){},21:function(e,t,s){},22:function(e,t,s){},24:function(e,t,s){},25:function(e,t,s){},26:function(e,t,s){},34:function(e,t,s){},36:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),r=s(4),c=s.n(r),i=(s(20),s(2)),l=(s(21),s(11)),o=(s(22),s(0)),b=function(e){var t=Object(n.useState)(""),s=Object(i.a)(t,2),a=s[0],r=s[1],c=Object(n.useState)(""),b=Object(i.a)(c,2),d=b[0],h=b[1],j=Object(n.useState)(""),u=Object(i.a)(j,2),m=u[0],p=u[1],O=Object(n.useState)(""),f=Object(i.a)(O,2),g=f[0],x=f[1],v=Object(n.useState)(new Date),N=Object(i.a)(v,2),y=N[0],w=N[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"center centerText",children:"success"===y?Object(o.jsxs)("p",{className:"f5 b success",children:["Thanks for registering ",a,". We have sent a confirmation mail to ",d,Object(o.jsx)("br",{}),"You will be automatically redirected to the form displaying page in 5 seconds."]}):Object(o.jsx)("p",{className:"empty"})}),Object(o.jsx)("article",{className:"br4 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l shadow-5 mw5 center",children:Object(o.jsx)("main",{className:"pa4 black-80",children:Object(o.jsxs)("div",{className:"measure",children:[Object(o.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(o.jsx)("legend",{className:"f2 fw6 ph0 mh0",children:"Register"}),Object(o.jsxs)("div",{className:"mt3",children:[Object(o.jsx)("label",{className:"db fw6 lh-copy f6 No-center",htmlFor:"email-address",children:"Name"}),Object(o.jsx)("input",{onChange:function(e){r(e.target.value)},className:"br3 pa2 input-reset ba bg-transparent hover-white w-100 resetable",type:"text",name:"name",id:"name",required:!0})]}),Object(o.jsxs)("div",{className:"mt3",children:[Object(o.jsx)("label",{className:"db fw6 lh-copy f6 No-center",htmlFor:"email-address",children:"Email"}),Object(o.jsx)("input",{onChange:function(e){h(e.target.value)},className:"br3 pa2 input-reset ba bg-transparent hover-white w-100 resetable",type:"email",name:"email-address",id:"email-address",required:!0})]}),Object(o.jsxs)("div",{className:"mv3",children:[Object(o.jsx)("label",{className:"db fw6 lh-copy f6 No-center",htmlFor:"phone",children:"Phone"}),Object(o.jsx)("input",{onChange:function(e){p(e.target.value)},className:"br3 b pa2 input-reset ba bg-transparent hover-white w-100 resetable",type:"tel",pattern:"[0-9]{10}",name:"phone",id:"phone",required:!0})]}),Object(o.jsxs)("div",{className:"mv3",children:[Object(o.jsx)("label",{className:"db fw6 lh-copy f6 No-center",htmlFor:"dob",children:"Date of Birth"}),Object(o.jsx)("input",{onChange:function(e){x(e.target.value)},className:"br3 b pa2 input-reset ba bg-transparent hover-white w-100 resetable",type:"date",placeholder:"2003-01-01",min:"".concat(Number((new Date).toISOString().slice(0,10).split("-")[0])-18,"-").concat(Number((new Date).toISOString().slice(0,10).split("-")[1]),"-").concat(Number((new Date).toISOString().slice(0,10).split("-")[2])),max:(new Date).toISOString().slice(0,10),name:"dob",id:"dob",required:!0})]})]}),Object(o.jsx)("div",{className:"center centerText",children:Object(o.jsx)("input",{onClick:function(){""===d?w("no-email"):""===a?w("no-name"):""===m?w("no-phone"):""===g?w("no-date"):/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(d)?fetch("http://localhost:3001/user-form",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({name:a,email:d,phone:m,dateofbirth:g})}).then((function(e){return e.json()})).then((function(t){if("unable-to-register"===t)w("unable-to-register");else if("email-exists"===t)w("email-exists");else if("invalid-phone"===t)w("invalid-phone");else{e.onRequestUsers(),w("success");var s,n=document.getElementsByClassName("resetable"),a=Object(l.a)(n);try{for(a.s();!(s=a.n()).done;){s.value.value=""}}catch(r){a.e(r)}finally{a.f()}setTimeout((function(){e.changeRoute("displayForms")}),5e3)}})):w("invalid-email")},className:"br-pill b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Register"})}),Object(o.jsx)("div",{className:"centerText center",children:"invalid-email"===y?Object(o.jsx)("p",{className:"error",children:"Please enter a valid email address "}):"no-email"===y?Object(o.jsx)("p",{className:"error",children:"Please enter your email address "}):"no-phone"===y?Object(o.jsx)("p",{className:"error",children:"Please enter a Phone Number "}):"no-name"===y?Object(o.jsx)("p",{className:"error",children:"Please enter your name "}):"email-exists"===y?Object(o.jsx)("p",{className:"error",children:"There is already an account with this email address."}):"unable-to-register"===y?Object(o.jsx)("p",{className:"error",children:"Unable to register "}):"no-phone"===y?Object(o.jsx)("p",{className:"error",children:"Please enter a Date of Birth "}):"invalid-phone"===y?Object(o.jsx)("p",{className:"error",children:"Please enter a valid 10 digit phone number "}):Object(o.jsx)("p",{className:"empty"})})]})})})]})},d=(s(24),function(){return Object(o.jsx)("nav",{className:"bb",children:Object(o.jsx)("h1",{className:"pl3 top",height:"90px",width:"150px",children:"StackFusion"})})}),h=(s(25),function(e){var t=e.name,s=e.id,a=e.email,r=e.phone,c=e.dateofbirth,l=Object(n.useState)(!1),b=Object(i.a)(l,2),d=b[0],h=b[1];return Object(o.jsxs)("div",{className:"tc card dib br3 pa3 ma2 grow bw2 shadow-5",onClick:function(){h(!1===d)},children:[Object(o.jsx)("img",{src:"https://robohash.org/".concat(s,"?set=set2"),alt:"".concat(t," Profile Pic")}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:t}),Object(o.jsxs)("div",{className:d?"show":"hidden",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{style:{color:"maroon"},children:"Email:"})," ",a]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{style:{color:"maroon"},children:"Phone:"})," ",r]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{style:{color:"maroon"},children:"Date of Birth:"})," ",c]})]})]})]})}),j=function(e){return e.users.map((function(e){return Object(o.jsx)(h,{id:e.id,name:e.name,email:e.email,phone:e.phone,dateofbirth:e.dateofbirth},e.id)}))},u=(s(26),function(e){var t=e.searchChange;return Object(o.jsx)("input",{className:"pa2 ba br-pill",type:"search",placeholder:"Search Users",onChange:t})}),m=s(5),p=(s(34),function(e){return Object(o.jsx)("div",{id:"scroll",children:e.children})}),O="CHANGE_SEARCHFIELD",f="REQUEST_USERS_PENDING",g="REQUEST_USERS_SUCCESS",x="REQUEST_USERS_FAILED",v="ADD_USER",N=Object(m.b)((function(e){return{searchField:e.searchUsers.searchField,users:e.requestUsers.users,error:e.requestUsers.error,isPending:e.requestUsers.isPending}}),(function(e){return{onSearchChange:function(t){var s;e((s=t.target.value,{type:O,payload:s}))},onRequestUsers:function(){e((function(e){e({type:f}),fetch("https://stackfusion-assignment.herokuapp.com/users").then((function(e){return e.json()})).then((function(t){return e({type:g,payload:t})})).catch((function(t){return e({type:x,payload:t})}))}))}}}))((function(e){Object(n.useEffect)((function(){e.onRequestUsers()}),[]);var t=Object(n.useState)("register"),s=Object(i.a)(t,2),a=s[0],r=s[1],c=function(e){r("register"===e?"register":"displayForms")},l=e.users.filter((function(t){return t.name.toLowerCase().includes(e.searchField.toLowerCase())}));return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(d,{}),Object(o.jsxs)("div",{className:"nav",children:[Object(o.jsx)("button",{className:"f6 grow no-underline br-pill ph3 pv2 mb2 dib near-black bg-white",onClick:function(){return c("displayForms")},children:"Show users"}),Object(o.jsx)("button",{style:{marginLeft:"auto"},className:"f6 grow no-underline br-pill ph3 pv2 mb2 dib near-black bg-white",onClick:function(){return c("register")},children:"Register"})]}),"register"===a?Object(o.jsx)(b,{onRequestUsers:e.onRequestUsers,changeRoute:c}):Object(o.jsx)("br",{}),"displayForms"===a?Object(o.jsxs)("div",{className:"centerText",children:[Object(o.jsx)(u,{searchChange:e.onSearchChange}),Object(o.jsx)("hr",{}),Object(o.jsx)(p,{children:Object(o.jsx)(j,{users:l})})]}):Object(o.jsx)("br",{})]})})),y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,37)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),n(e),a(e),r(e),c(e)}))},w=(s(35),{searchField:""}),S={isPending:!1,error:"",users:[]},C=s(3),E=s(14),U=s(15),F=Object(E.createLogger)(),P=Object(C.c)({searchUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case O:return Object.assign({},e,{searchField:t.payload});default:return e}},requestUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f:return Object.assign({},e,{isPending:!0});case g:return Object.assign({},e,{isPending:!1,users:t.payload});case x:return Object.assign({},e,{error:t.payload,isPending:!1});case v:return Object.assign({},e,{users:t.payload});default:return e}}}),k=Object(C.d)(P,Object(C.a)(U.a,F));c.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(m.a,{store:k,children:Object(o.jsx)(N,{})})}),document.getElementById("root")),y()}},[[36,1,2]]]);
//# sourceMappingURL=main.aac155f4.chunk.js.map